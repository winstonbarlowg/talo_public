(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{13970:(e,t,a)=>{Promise.resolve().then(a.bind(a,38865))},38865:(e,t,a)=>{"use strict";a.d(t,{default:()=>eg});var r=a(95155),n=a(12115),i=a(52596),s=a(39688);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,i.$)(t))}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:l("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:l("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:l("leading-none font-semibold",t),...a})}function m(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:l("text-muted-foreground text-sm",t),...a})}function u(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:l("px-6",t),...a})}function x(e){let{className:t,type:a,...n}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:l("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var h=a(40968);function p(e){let{className:t,...a}=e;return(0,r.jsx)(h.b,{"data-slot":"label",className:l("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...a})}let f=e=>{let{inputs:t,setInputs:a,handleNumberInput:n,handleInterestRateInput:i}=e;return(0,r.jsxs)(o,{className:"mb-8",children:[(0,r.jsx)(d,{children:(0,r.jsx)(c,{children:"Initial Mortgage Details"})}),(0,r.jsx)(u,{children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[{label:"Purchase Price",key:"purchasePrice",min:0,step:1},{label:"Deposit Percentage",key:"depositPercentage",min:0,max:100,step:.1},{label:"Initial Interest Rate (%)",key:"initialRate",min:0,step:.01},{label:"Initial Term (Years)",key:"initialTerm",min:1,step:1},{label:"Fixed Period (Years)",key:"fixedPeriod",min:1,step:1}].map(e=>{let{label:i,key:s,...l}=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:s,children:i}),(0,r.jsx)(x,{id:s,type:"number",value:t[s]||"",onChange:e=>a({...t,[s]:n(e.target.value,l.min)}),className:"w-full",...l})]},s)})})})]})};var g=a(83540),b=a(94517),v=a(24026);let j={light:"",dark:".dark"},y=n.createContext(null);function N(e){let{id:t,className:a,children:i,config:s,...o}=e,d=n.useId(),c="chart-".concat(t||d.replace(/:/g,""));return(0,r.jsx)(y.Provider,{value:{config:s},children:(0,r.jsxs)("div",{"data-slot":"chart","data-chart":c,className:l("[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",a),...o,children:[(0,r.jsx)(w,{id:c,config:s}),(0,r.jsx)(g.u,{children:i})]})})}let w=e=>{let{id:t,config:a}=e,n=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return n.length?(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(j).map(e=>{let[a,r]=e;return"\n".concat(r," [data-chart=").concat(t,"] {\n").concat(n.map(e=>{var t;let[r,n]=e,i=(null==(t=n.theme)?void 0:t[a])||n.color;return i?"  --color-".concat(r,": ").concat(i,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},P=b.m,k=v.s;function F(e){let{className:t,hideIcon:a=!1,payload:i,verticalAlign:s="bottom",nameKey:o}=e,{config:d}=function(){let e=n.useContext(y);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}();return(null==i?void 0:i.length)?(0,r.jsx)("div",{className:l("flex items-center justify-center gap-4","top"===s?"pb-3":"pt-3",t),children:i.map(e=>{let t="".concat(o||e.dataKey||"value"),n=function(e,t,a){if("object"!=typeof t||null===t)return;let r="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,n=a;return a in t&&"string"==typeof t[a]?n=t[a]:r&&a in r&&"string"==typeof r[a]&&(n=r[a]),n in e?e[n]:e[a]}(d,e,t);return(0,r.jsxs)("div",{className:l("[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3"),children:[(null==n?void 0:n.icon)&&!a?(0,r.jsx)(n.icon,{}):(0,r.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==n?void 0:n.label]},e.value)})}):null}var _=a(3401),S=a(94754),R=a(96025),I=a(16238),z=a(83394),C=a(70919);let M=e=>{let{data:t,refinanceScenarios:a}=e,n=t.map(e=>({month:e.month,interest:e.interest,principal:e.principal,total:e.interest+e.principal})),i=a.map((e,a)=>{var r;let n=null==(r=t.find(e=>e.scenarioIndex===a+1))?void 0:r.month;return n?{month:n,label:"Refinance ".concat(a+1)}:null}).filter(Boolean),s=e=>"\xa3".concat(e.toFixed(2));return(0,r.jsxs)(o,{children:[(0,r.jsx)(d,{children:(0,r.jsx)(c,{children:"Monthly Payment Components"})}),(0,r.jsx)(u,{children:(0,r.jsx)(N,{config:{interest:{label:"Interest Payment",color:"#f87171"},principal:{label:"Principal Payment",color:"#22c55e"}},className:"h-78 w-full",children:(0,r.jsxs)(_.E,{accessibilityLayer:!0,data:n,margin:{top:20,right:30,left:20,bottom:30},children:[(0,r.jsx)(S.d,{strokeDasharray:"3 3",className:"stroke-muted",vertical:!1}),(0,r.jsx)(R.W,{dataKey:"month",label:{value:"Month",position:"insideBottomRight",offset:-5},tick:{fontSize:12}}),(0,r.jsx)(I.h,{label:{value:"Payment Amount (\xa3)",angle:-90,position:"insideLeft"},tick:{fontSize:12},tickFormatter:e=>"\xa3".concat(e)}),(0,r.jsx)(P,{content:(0,r.jsx)(e=>{let{active:t,payload:a,label:n}=e;return t&&a&&a.length?(0,r.jsxs)("div",{className:"bg-white p-4 border rounded-md shadow-sm",children:[(0,r.jsxs)("p",{className:"font-medium text-sm",children:["Month: ",n]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("p",{className:"text-sm flex items-center",children:[(0,r.jsx)("span",{className:"w-3 h-3 inline-block mr-2 rounded-full bg-red-300"}),"Interest: ",s(a[0].value)]}),(0,r.jsxs)("p",{className:"text-sm flex items-center",children:[(0,r.jsx)("span",{className:"w-3 h-3 inline-block mr-2 rounded-full bg-green-500"}),"Principal: ",s(a[1].value)]}),(0,r.jsx)("div",{className:"border-t mt-2 pt-2",children:(0,r.jsxs)("p",{className:"text-sm font-medium",children:["Total: ",s(a[0].value+a[1].value)]})})]})]}):null},{})}),(0,r.jsx)(k,{content:(0,r.jsx)(F,{})}),(0,r.jsx)(z.y,{dataKey:"interest",stackId:"a",fill:"var(--color-interest)",radius:4}),(0,r.jsx)(z.y,{dataKey:"principal",stackId:"a",fill:"var(--color-principal)",radius:4}),i.map((e,t)=>(0,r.jsx)(C.e,{x:e.month,stroke:"#888888",strokeDasharray:"3 3",label:{value:e.label,position:"top",fill:"#888888",fontSize:12}},t))]})})})]})};var T=a(6650),A=a(21374),D=a(51146),B=a(66474),E=a(5196),q=a(47863);function L(e){let{...t}=e;return(0,r.jsx)(D.bL,{"data-slot":"select",...t})}function O(e){let{...t}=e;return(0,r.jsx)(D.WT,{"data-slot":"select-value",...t})}function K(e){let{className:t,size:a="default",children:n,...i}=e;return(0,r.jsxs)(D.l9,{"data-slot":"select-trigger","data-size":a,className:l("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,(0,r.jsx)(D.In,{asChild:!0,children:(0,r.jsx)(B.A,{className:"size-4 opacity-50"})})]})}function G(e){let{className:t,children:a,position:n="popper",...i}=e;return(0,r.jsx)(D.ZL,{children:(0,r.jsxs)(D.UC,{"data-slot":"select-content",className:l("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[(0,r.jsx)(W,{}),(0,r.jsx)(D.LM,{className:l("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,r.jsx)(Y,{})]})})}function V(e){let{className:t,children:a,...n}=e;return(0,r.jsxs)(D.q7,{"data-slot":"select-item",className:l("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,r.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,r.jsx)(D.VF,{children:(0,r.jsx)(E.A,{className:"size-4"})})}),(0,r.jsx)(D.p4,{children:a})]})}function W(e){let{className:t,...a}=e;return(0,r.jsx)(D.PP,{"data-slot":"select-scroll-up-button",className:l("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(q.A,{className:"size-4"})})}function Y(e){let{className:t,...a}=e;return(0,r.jsx)(D.wn,{"data-slot":"select-scroll-down-button",className:l("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(B.A,{className:"size-4"})})}function H(e){let{data:t=[],refinanceScenarios:a=[]}=e,[i,s]=(0,n.useState)("monthly"),l=t.map(e=>({month:e.month,balance:e.balance,equity:e.totalEquity,price:e.price})),m=(0,n.useMemo)(()=>"yearly"===i?l.filter(e=>e.month%12==0):l,[i,l]),x=a.map((e,a)=>{var r;let n=null==(r=t.find(e=>e.scenarioIndex===a+1))?void 0:r.month;return n?{month:n,label:"Refinance ".concat(a+1)}:null}).filter(Boolean);return(0,r.jsxs)(o,{children:[(0,r.jsx)(d,{children:(0,r.jsx)(c,{children:"Remaining Balance & Equity"})}),(0,r.jsxs)(u,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-end mb-2 space-x-2",children:[(0,r.jsx)("p",{className:"text-sm font-medium",children:"View:"}),(0,r.jsxs)(L,{value:i,onValueChange:s,children:[(0,r.jsx)(K,{className:"w-auto min-w-[100px]",children:(0,r.jsx)(O,{placeholder:"Monthly"})}),(0,r.jsxs)(G,{children:[(0,r.jsx)(V,{value:"monthly",children:"Monthly"}),(0,r.jsx)(V,{value:"yearly",children:"Yearly"})]})]})]}),(0,r.jsx)(N,{config:{balance:{label:"Balance",color:"#a855f7"},equity:{label:"Equity",color:"#10b981"},price:{label:"House Price",color:"#3b82f6"}},className:"h-64 w-full",children:(0,r.jsx)(g.u,{width:"100%",height:"100%",children:(0,r.jsxs)(T.X,{data:m,margin:{top:20,right:30,left:20,bottom:20},children:[(0,r.jsx)(S.d,{strokeDasharray:"3 3"}),(0,r.jsx)(R.W,{dataKey:"month",tick:{fontSize:12},tickFormatter:e=>"yearly"===i?"Year ".concat(e/12):e}),(0,r.jsx)(I.h,{tickFormatter:e=>e>=1e3?"\xa3".concat((e/1e3).toFixed(0),"k"):"\xa3".concat(e.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2}))}),(0,r.jsx)(P,{content:(0,r.jsx)(e=>{let{active:t,payload:a,label:i}=e;if(!t||!a)return null;let s=(0,n.useMemo)(()=>{let e=new Date;return e.setMonth(e.getMonth()+i),e.toLocaleString("en-GB",{month:"long",year:"numeric"})},[i]);return(0,r.jsxs)("div",{className:"bg-white p-3 border rounded-md shadow-sm",children:[(0,r.jsx)("div",{className:"font-medium mb-2",children:s}),(0,r.jsx)("div",{className:"flex flex-col space-y-1",children:a.map(e=>(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)("span",{className:"inline-block w-3 h-3 mr-2 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsxs)("span",{className:"flex-1",children:[e.name,":"]}),(0,r.jsxs)("span",{className:"font-medium",children:["\xa3",e.value.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})]})]},e.dataKey))})]})},{})}),(0,r.jsx)(k,{content:(0,r.jsx)(F,{})}),(0,r.jsx)(z.y,{dataKey:"equity",name:"Equity",fill:"var(--color-equity)",radius:[4,4,0,0]}),(0,r.jsx)(A.N,{type:"monotone",dataKey:"balance",name:"Balance",stroke:"var(--color-balance)",strokeWidth:3,dot:!1}),(0,r.jsx)(A.N,{type:"monotone",dataKey:"price",name:"House Price",stroke:"var(--color-price)",strokeWidth:3,dot:!1}),x.map((e,t)=>(0,r.jsx)(C.e,{x:e.month,stroke:"var(--muted-foreground)",strokeDasharray:"3 3",label:{value:e.label,position:"top",fill:"var(--muted-foreground)",fontSize:12}},t))]})})})]})]})}var Q=a(99708);let X=(0,a(74466).F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800 active:scale-95",destructive:"bg-rose-300 text-rose-900 hover:bg-rose-400 active:bg-rose-500 active:scale-95",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground active:bg-accent/80 active:scale-95",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:bg-secondary/60 active:scale-95",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/80 active:scale-95",link:"text-primary underline-offset-4 hover:underline active:text-primary/70"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),U=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:s=!1,...o}=e,d=s?Q.DX:"button";return(0,r.jsx)(d,{className:l(X({variant:n,size:i,className:a})),ref:t,...o})});U.displayName="Button";let Z=e=>{let{scenario:t,updateRefinanceScenario:a,deleteRefinanceScenario:i}=e,[s,l]=(0,n.useState)({newRate:t.newRate,refinanceFixedPeriod:t.refinanceFixedPeriod,newTerm:t.newTerm,overpayment:t.overpayment});(0,n.useEffect)(()=>{l({newRate:t.newRate,refinanceFixedPeriod:t.refinanceFixedPeriod,newTerm:t.newTerm,overpayment:t.overpayment})},[t]);let o=e=>t=>{let a=""===t.target.value?"":Number(t.target.value);l(t=>({...t,[e]:a}))};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:"newRate",children:"Interest Rate (%)"}),(0,r.jsx)(x,{id:"newRate",type:"number",step:"0.01",value:s.newRate,onChange:o("newRate")})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:"refinanceFixedPeriod",children:"Fixed Period (yrs)"}),(0,r.jsx)(x,{id:"refinanceFixedPeriod",type:"number",value:s.refinanceFixedPeriod,onChange:o("refinanceFixedPeriod")})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:"newTerm",children:"Remaining Term (yrs)"}),(0,r.jsx)(x,{id:"newTerm",type:"number",value:s.newTerm,onChange:o("newTerm")})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:"overpayment",children:"Overpayment (\xa3)"}),(0,r.jsx)(x,{id:"overpayment",type:"number",step:"100",value:s.overpayment,onChange:o("overpayment")})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,r.jsx)(U,{onClick:()=>{a(t.id,s)},children:"Save"}),(0,r.jsx)(U,{variant:"destructive",onClick:()=>{i(t.id)},children:"Delete"})]})]})};var $=a(87489);function J(e){let{className:t,orientation:a="horizontal",decorative:n=!0,...i}=e;return(0,r.jsx)($.b,{"data-slot":"separator-root",decorative:n,orientation:a,className:l("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}var ee=a(49103),et=a(13717);function ea(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:l("w-full caption-bottom text-sm",t),...a})})}function er(e){let{className:t,...a}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:l("[&_tr]:border-b",t),...a})}function en(e){let{className:t,...a}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:l("[&_tr:last-child]:border-0",t),...a})}function ei(e){let{className:t,...a}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:l("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function es(e){let{className:t,...a}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:l("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function el(e){let{className:t,...a}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:l("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}var eo=a(17447);function ed(e){let{...t}=e;return(0,r.jsx)(eo._s.Root,{"data-slot":"drawer",...t})}function ec(e){let{...t}=e;return(0,r.jsx)(eo._s.Portal,{"data-slot":"drawer-portal",...t})}function em(e){let{className:t,...a}=e;return(0,r.jsx)(eo._s.Overlay,{"data-slot":"drawer-overlay",className:l("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function eu(e){let{className:t,children:a,...n}=e;return(0,r.jsxs)(ec,{"data-slot":"drawer-portal",children:[(0,r.jsx)(em,{}),(0,r.jsxs)(eo._s.Content,{"data-slot":"drawer-content",className:l("group/drawer-content bg-background fixed z-50 flex h-auto flex-col","data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b","data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t","data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm","data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",t),...n,children:[(0,r.jsx)("div",{className:"bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block"}),a]})]})}function ex(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"drawer-header",className:l("flex flex-col gap-1.5 p-4",t),...a})}function eh(e){let{className:t,...a}=e;return(0,r.jsx)(eo._s.Title,{"data-slot":"drawer-title",className:l("text-foreground font-semibold",t),...a})}var ep=a(54073);function ef(e){let{className:t,defaultValue:a,value:i,min:s=0,max:o=100,...d}=e,c=n.useMemo(()=>Array.isArray(i)?i:Array.isArray(a)?a:[s,o],[i,a,s,o]);return(0,r.jsxs)(ep.bL,{"data-slot":"slider",defaultValue:a,value:i,min:s,max:o,className:l("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...d,children:[(0,r.jsx)(ep.CC,{"data-slot":"slider-track",className:l("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:(0,r.jsx)(ep.Q6,{"data-slot":"slider-range",className:l("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:c.length},(e,t)=>(0,r.jsx)(ep.zi,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},t))]})}let eg=()=>{let[e,t]=(0,n.useState)({purchasePrice:485e3,depositPercentage:15,initialRate:4.41,initialTerm:30,fixedPeriod:5}),[a,i]=(0,n.useState)([{id:1,newRate:3.5,newTerm:25,overpayment:5e4,refinanceFixedPeriod:5}]),[s,l]=(0,n.useState)([]),[h,g]=(0,n.useState)(null),[b,v]=(0,n.useState)(null),[j,y]=(0,n.useState)([1,5]),[N,w]=(0,n.useState)(1),[P,k]=(0,n.useState)(0),[F,_]=(0,n.useState)(0..toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2})),S=(0,n.useMemo)(()=>{if(!s.length||!h)return null;let e=Math.min(Math.max(1,N),s[s.length-1].month),t=s.find(t=>t.month===e);if(!t)return null;let a=t.price,r=t.balance,n=a-r,i=h.initialDetails.depositAmount+P,l=n-i,o=s.filter(t=>t.month<=e).reduce((e,t)=>e+t.interest,0),d=l-o,c=Math.pow((d+i)/i,1/(e/12))-1;return{salePrice:a,remainingBalance:r,netProceedsBeforeInterest:n,cashOutBeforeInterest:i,profitBeforeInterest:l,interestPaid:o,profitAfterInterest:d,roi:d/i,irr:c}},[s,h,N,P]),R=(e,t,a)=>{let r=t/100/12,n=12*a;return e*r*Math.pow(1+r,n)/(Math.pow(1+r,n)-1)},I=e=>new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);(0,n.useEffect)(()=>{(()=>{let t=e.purchasePrice*(e.depositPercentage/100),r=e.purchasePrice-t,n=R(r,e.initialRate,e.initialTerm),i=r,s=[],o=0,d=0;for(let a=1;a<=12*e.fixedPeriod;a++){let r=i*(e.initialRate/100/12),l=n-r;o+=r,d+=l,i-=l,s.push({month:a,payment:n,interest:r,principal:l,balance:i,totalInterest:o,totalPrincipalPaid:d,totalEquity:t+d,scenarioIndex:0})}let c={monthlyPayment:n,totalInterest:o,totalPrincipal:d,remainingBalance:i},m=12*e.fixedPeriod,u=[];a.forEach((e,a)=>{let r=i;i-=e.overpayment,d+=e.overpayment;let n=R(i,e.newRate,e.newTerm),l=0,c=0;for(let r=1;r<=12*e.refinanceFixedPeriod;r++){let u=i*(e.newRate/100/12),x=n-u;l+=u,c+=x,o+=u,d+=x,i-=x,s.push({month:m+r,payment:n,interest:u,principal:x,balance:i,totalInterest:o,totalPrincipalPaid:d,totalEquity:t+d,scenarioIndex:a+1})}u.push({id:e.id,startBalance:r,monthlyPayment:n,interestPaid:l,principalPaid:c+e.overpayment,endBalance:i,overpayment:e.overpayment,newRate:e.newRate,refinanceFixedPeriod:e.refinanceFixedPeriod,newTerm:e.newTerm}),m+=12*e.refinanceFixedPeriod});let x=Array.from({length:Math.ceil(s.length/12)},()=>Math.random()*(j[1]-j[0])+j[0]),h=e.purchasePrice;s.forEach(e=>{let t=Math.pow(1+x[Math.floor((e.month-1)/12)]/100,1/12)-1;e.price=h*=1+t,e.totalEquity=e.price-e.balance}),l(s),g({initialDetails:{loanAmount:r,depositAmount:t,monthlyPayment:n},initialPeriod:c,refinanceScenarios:u,totals:{interestPaid:o,principalPaid:d,totalEquity:t+d,remainingBalance:i}})})()},[e,a,j]);let z=e=>{i(t=>t.filter(t=>t.id!==e))};return(0,r.jsxs)("div",{className:"container mx-auto py-8 px-4",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"Mortgage Calculator"}),(0,r.jsx)(f,{inputs:e,setInputs:t,handleNumberInput:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(""===e)return"";let a=Number(e);return a<t?t:a},handleInterestRateInput:e=>{if(""===e)return"";let t=e.toString();return t.startsWith(".")?"0".concat(t):Number(t)}}),(0,r.jsxs)(o,{className:"mb-8",children:[(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{children:"Price Appreciation"}),(0,r.jsx)(m,{children:"Select annual growth range"})]}),(0,r.jsxs)(u,{className:"space-y-4",children:[(0,r.jsxs)(p,{children:["Growth: ",j[0],"% â€“ ",j[1],"%"]}),(0,r.jsx)(ef,{value:j,min:1,max:15,step:1,onValueChange:y,marks:[{value:1,label:"1%"},{value:6,label:"6%"},{value:11,label:"11%"}]})]})]}),h&&(0,r.jsxs)(o,{className:"mb-8",children:[(0,r.jsx)(d,{children:(0,r.jsx)(c,{children:"Summary"})}),(0,r.jsxs)(u,{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Initial Period"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Deposit Amount"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(h.initialDetails.depositAmount)})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Initial Loan Amount"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(h.initialDetails.loanAmount)})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Monthly Payment"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(h.initialPeriod.monthlyPayment)})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Interest Paid"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(h.initialPeriod.totalInterest)})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Principal Paid"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(h.initialPeriod.totalPrincipal)})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-1",children:"Remaining Balance"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(h.initialPeriod.remainingBalance)})]})]})]}),(0,r.jsx)(J,{className:"my-8"}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Refinancing Scenarios"}),(0,r.jsxs)(U,{onClick:()=>{i([...a,{id:Date.now(),newRate:3.5,newTerm:25,overpayment:0,refinanceFixedPeriod:5}])},className:"flex items-center gap-2",children:[(0,r.jsx)(ee.A,{className:"h-4 w-4"}),"Add Refinancing Scenario"]})]}),(0,r.jsx)(J,{className:"my-8"}),(0,r.jsxs)(ea,{children:[(0,r.jsx)(er,{children:(0,r.jsxs)(ei,{children:[(0,r.jsx)(es,{children:"Interest Rate"}),(0,r.jsx)(es,{children:"Fixed Term"}),(0,r.jsx)(es,{children:"Remaining Term"}),(0,r.jsx)(es,{children:"Monthly Payment"}),(0,r.jsx)(es,{children:"Interest Paid"}),(0,r.jsx)(es,{children:"Principal Paid"}),(0,r.jsx)(es,{children:"Overpayment"}),(0,r.jsx)(es,{})]})}),(0,r.jsx)(en,{children:h.refinanceScenarios.map(e=>(0,r.jsxs)(ei,{children:[(0,r.jsxs)(el,{children:[e.newRate,"%"]}),(0,r.jsxs)(el,{children:[e.refinanceFixedPeriod," yrs"]}),(0,r.jsxs)(el,{children:[e.newTerm," yrs"]}),(0,r.jsx)(el,{children:I(e.monthlyPayment)}),(0,r.jsx)(el,{children:I(e.interestPaid)}),(0,r.jsx)(el,{children:I(e.principalPaid)}),(0,r.jsx)(el,{children:I(e.overpayment)}),(0,r.jsx)(el,{children:(0,r.jsx)(U,{size:"xs",variant:"outline",onClick:()=>v(e.id),className:"p-2",children:(0,r.jsx)(et.A,{className:"h-4 w-4"})})})]},e.id))})]}),(0,r.jsx)(ed,{direction:"right",open:null!==b,onOpenChange:e=>{e||v(null)},children:(0,r.jsxs)(eu,{children:[(0,r.jsx)(ex,{children:(0,r.jsx)(eh,{children:"Edit Scenario"})}),(0,r.jsx)("div",{className:"p-4",children:b&&(0,r.jsx)(Z,{scenario:h.refinanceScenarios.find(e=>e.id===b),updateRefinanceScenario:(e,t)=>{i(a=>a.map(a=>a.id===e?{...a,...t}:a)),v(null)},deleteRefinanceScenario:e=>{z(e),v(null)}})})]})})]})]}),s.length>0&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)(M,{data:s,refinanceScenarios:a}),(0,r.jsx)(H,{data:s,refinanceScenarios:a}),S&&(0,r.jsxs)(o,{className:"mt-8",children:[(0,r.jsx)(d,{children:(0,r.jsx)(c,{children:"Sale Analysis"})}),(0,r.jsxs)(u,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:"sellMonth",children:"Sell Month"}),(0,r.jsx)(x,{id:"sellMonth",type:"number",value:N,min:1,max:s[s.length-1].month,onChange:e=>{let t=e.target.value.replace(/^0+(?=\d)/,"");w(""===t?0:Number(t))}})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{htmlFor:"fees",children:"Transaction Fees (\xa3)"}),(0,r.jsx)(x,{id:"fees",type:"text",value:F,onFocus:()=>{_(P.toString())},onChange:e=>{let t=e.target.value.replace(/[^0-9.]/g,"");_(t),k(Number(t)||0)},onBlur:()=>{_(P.toLocaleString("en-GB",{minimumFractionDigits:2,maximumFractionDigits:2}))}})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,r.jsxs)("div",{className:"bg-muted p-4 rounded",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Sale Price"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(S.salePrice)})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Net Proceeds (before interest)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(S.netProceedsBeforeInterest)})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Cash Out (before interest)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(S.cashOutBeforeInterest)})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Profit (before interest)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(S.profitBeforeInterest)})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Profit (after interest)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:I(S.profitAfterInterest)})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Performance Metrics"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[(0,r.jsxs)("div",{className:"bg-muted p-4 rounded",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"ROI"}),(0,r.jsxs)("p",{className:"text-xl font-bold",children:[(100*S.roi).toFixed(1),"%"]})]}),(0,r.jsxs)("div",{className:"bg-muted p-4 rounded",children:[(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"IRR (annual)"}),(0,r.jsxs)("p",{className:"text-xl font-bold",children:[(100*S.irr).toFixed(1),"%"]})]})]})]})]})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[412,441,684,358],()=>t(13970)),_N_E=e.O()}]);